<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BARAH ELITE | Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --gold: #D4AF37; --bg: #0f1215; --card: #1a1d23; }
        body { font-family: 'Tajawal'; background: var(--bg); color: #fff; margin: 0; padding: 0; }
        header { padding: 15px; background: #111; border-bottom: 2px solid var(--gold); display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 99; }
        
        /* ØªØµÙ…ÙŠÙ… ÙÙ„ØªØ± Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
        .filter-container { background: var(--card); padding: 20px; border-bottom: 1px solid #333; }
        .filter-box { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; max-width: 1000px; margin: 0 auto; }
        
        .search-input-group {
            flex: 1; min-width: 200px; position: relative;
            background: #222; border: 1px solid #444; border-radius: 50px;
            display: flex; align-items: center; padding: 5px 15px; transition: 0.3s;
        }
        .search-input-group:focus-within { border-color: var(--gold); box-shadow: 0 0 10px rgba(212, 175, 55, 0.2); }
        .search-input-group i { color: var(--gold); margin-left: 10px; font-size: 1.1rem; }
        
        .inp { width: 100%; background: transparent; border: none; color: #fff; padding: 10px; font-family: 'Tajawal'; outline: none; -webkit-appearance: none; }
        .inp option { background: #222; color: #fff; }

        .btn-search {
            padding: 12px 30px; background: linear-gradient(45deg, var(--gold), #aa8c2c);
            border: none; border-radius: 50px; font-weight: bold; cursor: pointer; color: #000;
            display: flex; align-items: center; gap: 10px; transition: 0.3s;
        }
        .btn-search:hover { transform: scale(1.05); }

        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; padding: 20px; }
        .card { background: var(--card); border-radius: 10px; overflow: hidden; border: 1px solid #333; position: relative; transition: 0.3s; }
        .card:hover { transform: translateY(-5px); border-color: var(--gold); }
        .img { width: 100%; height: 200px; object-fit: cover; }
        .body { padding: 15px; }
        .price { color: var(--gold); font-size: 1.3rem; font-weight: bold; }
        .wa { display: block; background: #25D366; color: #fff; text-align: center; padding: 10px; border-radius: 5px; text-decoration: none; margin-top: 10px; font-weight: bold; }
        
        .sidebar { position: fixed; top: 0; right: -260px; width: 250px; height: 100%; background: #111; z-index: 200; transition: 0.3s; padding: 20px; border-left: 2px solid var(--gold); }
        .sidebar.active { right: 0; }
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 100; display: none; }
        .overlay.active { display: block; }
        .back-btn { position: fixed; top: 20px; right: 20px; background: rgba(0,0,0,0.8); width: 40px; height: 40px; border-radius: 50%; color: var(--gold); display: flex; align-items: center; justify-content: center; z-index: 50; border: 1px solid var(--gold); }
    </style>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
</head>
<body>
    <a href="vip_welcome.html" class="back-btn"><i class="fas fa-arrow-right"></i></a>
    <header>
        <i class="fas fa-bars" style="color:#fff; font-size:1.5rem; cursor:pointer;" onclick="toggle()"></i>
        <span style="color:var(--gold); font-weight:bold; font-size:1.5rem;">BARAH</span>
        <div style="width:20px"></div>
    </header>

    <div class="overlay" onclick="toggle()"></div>
    <div class="sidebar" id="sidebar">
        <h3 style="color:var(--gold)">Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</h3>
        <p onclick="location.href='vip_welcome.html'" style="cursor:pointer"><i class="fas fa-home"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</p>
        <p onclick="toggle()"><i class="fas fa-search"></i> Ø¨Ø­Ø«</p>
        <p onclick="location.href='https://wa.me/20110557821'" style="cursor:pointer"><i class="fas fa-phone"></i> ØªÙˆØ§ØµÙ„</p>
    </div>

    <div class="filter-container">
        <div class="filter-box">
            
            <div class="search-input-group">
                <i class="fas fa-exchange-alt"></i>
                <select id="t" class="inp">
                    <option value="all">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ø±Ø¶ (Ø§Ù„ÙƒÙ„)</option>
                    <option value="sale">ØªÙ…Ù„ÙŠÙƒ</option>
                    <option value="rent">Ø¥ÙŠØ¬Ø§Ø±</option>
                </select>
            </div>

            <div class="search-input-group">
                <i class="fas fa-map-marker-alt"></i>
                <select id="d" class="inp">
                    <option value="all">ÙƒÙ„ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚</option>
                    <option value="Ø§Ù„Ø­ÙŠ Ø§Ù„ØªØ§Ø³Ø¹">Ø§Ù„Ø­ÙŠ Ø§Ù„ØªØ§Ø³Ø¹ (VIP)</option>
                    <option value="Ø¬ÙˆÙ„Ù Ø³ÙŠØªÙŠ">Ø¬ÙˆÙ„Ù Ø³ÙŠØªÙŠ</option>
                    <option value="Ø¬Ù…Ø¹ÙŠØ© Ø¹Ø±Ø§Ø¨ÙŠ">Ø¬Ù…Ø¹ÙŠØ© Ø£Ø­Ù…Ø¯ Ø¹Ø±Ø§Ø¨ÙŠ</option>
                    <option value="Ø§Ù„Ø­ÙŠ Ø§Ù„Ø£ÙˆÙ„">Ø§Ù„Ø­ÙŠ Ø§Ù„Ø£ÙˆÙ„</option>
                    <option value="Ø§Ù„Ø­ÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ">Ø§Ù„Ø­ÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ</option>
                    <option value="Ø§Ù„Ø­ÙŠ Ø§Ù„Ø«Ø§Ù„Ø«">Ø§Ù„Ø­ÙŠ Ø§Ù„Ø«Ø§Ù„Ø«</option>
                    <option value="Ø§Ù„Ø­ÙŠ Ø§Ù„Ø±Ø§Ø¨Ø¹">Ø§Ù„Ø­ÙŠ Ø§Ù„Ø±Ø§Ø¨Ø¹</option>
                    <option value="Ø§Ù„Ø­ÙŠ Ø§Ù„Ø®Ø§Ù…Ø³">Ø§Ù„Ø­ÙŠ Ø§Ù„Ø®Ø§Ù…Ø³</option>
                    <option value="Ø§Ù„Ø­ÙŠ Ø§Ù„Ø³Ø§Ø¯Ø³">Ø§Ù„Ø­ÙŠ Ø§Ù„Ø³Ø§Ø¯Ø³</option>
                    <option value="Ø§Ù„Ø­ÙŠ Ø§Ù„Ø³Ø§Ø¨Ø¹">Ø§Ù„Ø­ÙŠ Ø§Ù„Ø³Ø§Ø¨Ø¹</option>
                    <option value="Ø§Ù„Ø­ÙŠ Ø§Ù„Ø«Ø§Ù…Ù†">Ø§Ù„Ø­ÙŠ Ø§Ù„Ø«Ø§Ù…Ù†</option>
                    <option value="Ø§Ù„Ø¹Ø¨ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©">Ø§Ù„Ø¹Ø¨ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</option>
                    <option value="Ø¨ÙŠØª Ø§Ù„ÙˆØ·Ù†">Ø¨ÙŠØª Ø§Ù„ÙˆØ·Ù†</option>
                    <option value="Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªØ±ÙÙŠÙ‡ÙŠØ©">Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªØ±ÙÙŠÙ‡ÙŠØ©</option>
                    <option value="Ø¥Ø³ÙƒØ§Ù† Ø¹Ø§Ø¦Ù„ÙŠ">Ø¥Ø³ÙƒØ§Ù† Ø¹Ø§Ø¦Ù„ÙŠ</option>
                    <option value="Ø¥Ø³ÙƒØ§Ù† Ø§Ù„Ø´Ø¨Ø§Ø¨">Ø¥Ø³ÙƒØ§Ù† Ø§Ù„Ø´Ø¨Ø§Ø¨</option>
                </select>
            </div>

            <div class="search-input-group">
                <i class="fas fa-money-bill-wave"></i>
                <input type="number" id="p" class="inp" placeholder="Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø³Ø¹Ø±">
            </div>

            <button class="btn-search" onclick="load()">Ø¨Ø­Ø« <i class="fas fa-search"></i></button>
        </div>
    </div>

    <div class="grid" id="grid"><p style="text-align:center">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙˆØ­Ø¯Ø§Øª...</p></div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBbhybhto4kPZhdVUjpXoJa-l5Ql09qiYA",
            authDomain: "barah-project.firebaseapp.com",
            projectId: "barah-project",
            storageBucket: "barah-project.firebasestorage.app",
            messagingSenderId: "733946508060",
            appId: "1:733946508060:web:ce99a5431363d22d8e40d9"
        };

        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        let all=[];
        
        function toggle(){ document.getElementById('sidebar').classList.toggle('active'); document.querySelector('.overlay').classList.toggle('active'); }
        
        db.collection("apartments").orderBy("createdAt","desc").onSnapshot(s=>{
            all=[]; s.forEach(d=>all.push(d.data())); load();
        });

        function load(){
            const t=document.getElementById('t').value;
            const d=document.getElementById('d').value;
            const p=document.getElementById('p').value; // Ø§Ù„Ø³Ø¹Ø±
            const g=document.getElementById('grid');
            
            g.innerHTML=""; let c=0;
            
            all.forEach(u=>{
                // ÙÙ„ØªØ± Ø§Ù„Ù†ÙˆØ¹
                if(t!=='all' && u.type!==t) return;
                // ÙÙ„ØªØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø©
                if(d!=='all' && u.district!==d) return;
                // ÙÙ„ØªØ± Ø§Ù„Ø³Ø¹Ø± (Ù„Ùˆ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙƒØªØ¨ Ø³Ø¹Ø±)
                if(p && u.price > Number(p)) return;

                c++;
                const img=u.images?u.images[0]:'https://via.placeholder.com/300';
                const badge=u.visibility==='private'?'<span style="position:absolute;top:10px;left:10px;background:red;padding:5px;font-size:0.8rem;border-radius:5px;">ğŸ’ ÙØ±ØµØ©</span>':'';
                g.innerHTML+=`<div class="card">${badge}<img src="${img}" class="img"><div class="body"><div class="price">${u.price.toLocaleString()} EGP</div><h3>${u.title}</h3><p style="color:#aaa">${u.district} | ${u.rooms} ØºØ±Ù</p><a href="https://wa.me/${u.marketerPhone||'20110557821'}" class="wa">ØªÙˆØ§ØµÙ„</a></div></div>`;
            });
            if(c===0)g.innerHTML="<p style='text-align:center; grid-column:span 3;'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ø¨Ø­Ø«Ùƒ.</p>";
        }
    </script>
</body>
</html>