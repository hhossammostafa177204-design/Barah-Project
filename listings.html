<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BARAH ELITE | Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --gold: #D4AF37; --bg: #0f1215; --card: #1a1d23; }
        body { font-family: 'Tajawal'; background: var(--bg); color: #fff; margin: 0; padding: 0; }
        header { padding: 15px; background: #111; border-bottom: 2px solid var(--gold); display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 99; }
        .filter-box { padding: 20px; background: var(--card); margin: 20px; border-radius: 10px; border: 1px solid #333; }
        .inp { width: 100%; padding: 10px; background: #222; border: 1px solid #444; color: #fff; margin-bottom: 10px; border-radius: 5px; }
        .btn-search { width: 100%; padding: 10px; background: var(--gold); border: none; font-weight: bold; cursor: pointer; border-radius: 5px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; padding: 20px; }
        .card { background: var(--card); border-radius: 10px; overflow: hidden; border: 1px solid #333; position: relative; }
        .img { width: 100%; height: 200px; object-fit: cover; }
        .body { padding: 15px; }
        .price { color: var(--gold); font-size: 1.3rem; font-weight: bold; }
        .wa { display: block; background: #25D366; color: #fff; text-align: center; padding: 10px; border-radius: 5px; text-decoration: none; margin-top: 10px; font-weight: bold; }
        .sidebar { position: fixed; top: 0; right: -260px; width: 250px; height: 100%; background: #111; z-index: 200; transition: 0.3s; padding: 20px; border-left: 2px solid var(--gold); }
        .sidebar.active { right: 0; }
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 100; display: none; }
        .overlay.active { display: block; }
        .back-btn { position: fixed; top: 20px; right: 20px; background: rgba(0,0,0,0.8); width: 40px; height: 40px; border-radius: 50%; color: var(--gold); display: flex; align-items: center; justify-content: center; z-index: 50; border: 1px solid var(--gold); }
    </style>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
</head>
<body>
    <a href="vip_welcome.html" class="back-btn"><i class="fas fa-arrow-right"></i></a>
    <header>
        <i class="fas fa-bars" style="color:#fff; font-size:1.5rem; cursor:pointer;" onclick="toggle()"></i>
        <span style="color:var(--gold); font-weight:bold; font-size:1.5rem;">BARAH</span>
        <div style="width:20px"></div>
    </header>

    <div class="overlay" onclick="toggle()"></div>
    <div class="sidebar" id="sidebar">
        <h3 style="color:var(--gold)">Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</h3>
        <p><i class="fas fa-home"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</p>
        <p><i class="fas fa-search"></i> Ø¨Ø­Ø«</p>
        <p><i class="fas fa-phone"></i> ØªÙˆØ§ØµÙ„</p>
    </div>

    <div class="filter-box">
        <h3 style="margin-top:0; color:var(--gold)">ÙÙ„ØªØ± Ø§Ù„Ø¨Ø­Ø«</h3>
        <select id="t" class="inp"><option value="all">Ø§Ù„Ù†ÙˆØ¹</option><option value="sale">ØªÙ…Ù„ÙŠÙƒ</option><option value="rent">Ø¥ÙŠØ¬Ø§Ø±</option></select>
        <select id="d" class="inp"><option value="all">Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</option><option value="Ø§Ù„Ø­ÙŠ Ø§Ù„ØªØ§Ø³Ø¹">Ø§Ù„Ø­ÙŠ Ø§Ù„ØªØ§Ø³Ø¹</option><option value="Ø¬ÙˆÙ„Ù Ø³ÙŠØªÙŠ">Ø¬ÙˆÙ„Ù Ø³ÙŠØªÙŠ</option><option value="Ø¬Ù…Ø¹ÙŠØ© Ø¹Ø±Ø§Ø¨ÙŠ">Ø¬Ù…Ø¹ÙŠØ© Ø¹Ø±Ø§Ø¨ÙŠ</option></select>
        <button class="btn-search" onclick="load()">Ø¨Ø­Ø« Ø§Ù„Ø¢Ù† <i class="fas fa-search"></i></button>
    </div>

    <div class="grid" id="grid"><p style="text-align:center">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p></div>

    <script>
        const cfg={apiKey:"AIzaSyDBRcr-Np9SwYRR-cBqJDZ7FZmwk6VWLJU",authDomain:"barah-realestate-c7095.firebaseapp.com",projectId:"barah-realestate-c7095"};
        firebase.initializeApp(cfg); const db=firebase.firestore();
        let all=[];
        function toggle(){ document.getElementById('sidebar').classList.toggle('active'); document.querySelector('.overlay').classList.toggle('active'); }
        
        db.collection("apartments").orderBy("createdAt","desc").onSnapshot(s=>{
            all=[]; s.forEach(d=>all.push(d.data())); load();
        });

        function load(){
            const t=document.getElementById('t').value, d=document.getElementById('d').value, g=document.getElementById('grid');
            g.innerHTML=""; let c=0;
            all.forEach(u=>{
                if(t!=='all'&&u.type!==t)return; if(d!=='all'&&u.district!==d)return;
                c++;
                const img=u.images?u.images[0]:'https://via.placeholder.com/300';
                const badge=u.visibility==='private'?'<span style="position:absolute;top:10px;left:10px;background:red;padding:5px;font-size:0.8rem;border-radius:5px;">ğŸ’ ÙØ±ØµØ©</span>':'';
                g.innerHTML+=`<div class="card">${badge}<img src="${img}" class="img"><div class="body"><div class="price">${u.price.toLocaleString()} EGP</div><h3>${u.title}</h3><p style="color:#aaa">${u.district} | ${u.rooms} ØºØ±Ù</p><a href="https://wa.me/${u.marketerPhone||'20110557821'}" class="wa">ØªÙˆØ§ØµÙ„</a></div></div>`;
            });
            if(c===0)g.innerHTML="<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬.</p>";
        }
    </script>
</body>
</html>